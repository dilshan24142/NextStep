<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <title>Lost & Found Items</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css" rel="stylesheet">
    <style>
        .item-card { transition: all 0.3s; }
        .item-card:hover { box-shadow: 0 5px 15px rgba(0,0,0,0.2); }
        .claimed-badge { position: absolute; top: 10px; right: 10px; }
    </style>
</head>
<body>
<!-- Navigation same as home page -->

<div class="container mt-5">
    <h1 class="mb-4">üì¶ Lost & Found Items</h1>

    <!-- Search Form -->
    <form th:action="@{/lost-found/items}" method="get" class="row g-3 mb-4">
        <div class="col-md-8">
            <input type="text" name="search" class="form-control"
                   placeholder="Search by item name or description..."
                   th:value="${searchQuery}">
        </div>
        <div class="col-md-2">
            <button type="submit" class="btn btn-primary w-100">
                <i class="fas fa-search"></i> Search
            </button>
        </div>
        <div class="col-md-2">
            <a th:href="@{/lost-found/report}" class="btn btn-success w-100">
                <i class="fas fa-plus"></i> New Report
            </a>
        </div>
    </form>

    <!-- Items Grid -->
    <div class="row" th:if="${!items.empty}">
        <div th:each="item : ${items}" class="col-md-4 mb-4">
            <div class="card item-card h-100">
                <div class="card-body">
                    <span th:if="${item.claimed}" class="badge bg-success claimed-badge">‚úì Claimed</span>
                    <span th:unless="${item.claimed}" class="badge bg-warning claimed-badge">Unclaimed</span>

                    <h5 class="card-title" th:text="${item.itemName}">Item Name</h5>
                    <p class="card-text text-muted" th:text="${item.description}">Description</p>

                    <ul class="list-unstyled">
                        <li><strong>üìç</strong> <span th:text="${item.locationFound}">Location</span></li>
                        <li><strong>üìÖ</strong> <span th:text="${#temporals.format(item.dateFound, 'dd MMM yyyy')}">Date</span></li>
                        <li><strong>üìß</strong> <span th:text="${item.contactEmail}">Email</span></li>
                        <li><strong>üè∑Ô∏è</strong> <span th:text="${item.category}">Category</span></li>
                    </ul>

                    <a th:href="@{'mailto:' + ${item.contactEmail}}" class="btn btn-outline-primary btn-sm">
                        <i class="fas fa-envelope"></i> Contact Owner
                    </a>
                </div>
            </div>
        </div>
    </div>

    <!-- No Items Message -->
    <div th:if="${items.empty}" class="text-center py-5">
        <i class="fas fa-inbox fa-4x text-muted mb-3"></i>
        <h3>No items found</h3>
        <p class="text-muted" th:if="${searchQuery}">
            No results for "<span th:text="${searchQuery}"></span>"
        </p>
        <a th:href="@{/lost-found/report}" class="btn btn-primary mt-3">
            Be the first to report an item
        </a>
    </div>

    <!-- Pagination -->
    <div th:if="${totalPages > 1}" class="d-flex justify-content-center mt-5">
        <nav>
            <ul class="pagination">
                <li class="page-item" th:classappend="${currentPage == 0} ? 'disabled'">
                    <a class="page-link" th:href="@{/lost-found/items(page=${currentPage-1}, search=${searchQuery})}">
                        Previous
                    </a>
                </li>

                <li th:each="i : ${#numbers.sequence(0, totalPages-1)}"
                    class="page-item" th:classappend="${i == currentPage} ? 'active'">
                    <a class="page-link" th:href="@{/lost-found/items(page=${i}, search=${searchQuery})}"
                       th:text="${i+1}">1</a>
                </li>

                <li class="page-item" th:classappend="${currentPage == totalPages-1} ? 'disabled'">
                    <a class="page-link" th:href="@{/lost-found/items(page=${currentPage+1}, search=${searchQuery})}">
                        Next
                    </a>
                </li>
            </ul>
        </nav>
    </div>
</div>
</body>
</html>